# 后台数据分析系统登录指南

## 🔐 管理员权限说明

后台数据分析系统需要管理员权限才能访问。系统支持以下几种管理员身份验证方式：

### 1. 基于用户ID
- 在 `.env` 文件中配置的管理员用户ID：`admin`, `administrator`, `root`
- 可以通过修改 `ADMIN_USER_IDS` 环境变量添加更多管理员用户

### 2. 基于用户角色
- 用户的 `role` 字段为 `admin`

### 3. 基于用户名前缀
- 用户名以 `admin_` 开头的用户

### 4. 基于邮箱域名
- 邮箱以 `@admin.star.com` 结尾的用户

## 📋 登录步骤

### 步骤1：注册管理员账户

1. 访问注册页面：http://localhost:3000/
2. 使用以下任一方式注册管理员账户：
   - **用户ID方式**：注册时使用用户ID `admin`、`administrator` 或 `root`
   - **用户名方式**：注册时使用以 `admin_` 开头的用户名，如 `admin_zhang`
   - **邮箱方式**：使用以 `@admin.star.com` 结尾的邮箱注册

### 步骤2：登录系统

1. 访问登录页面：http://localhost:3000/
2. 使用注册的管理员账户登录

### 步骤3：访问数据分析后台

登录成功后，可以通过以下方式访问数据分析后台：

- **直接访问**：http://localhost:3000/analytics/dashboard
- **从主页导航**：登录后在主页寻找"数据分析"或"后台管理"链接

## 🚀 快速开始

### 预设管理员账户

系统已为您创建了一个预设的管理员账户：

**管理员登录信息：**
- 📧 **邮箱**: `admin@star.com`
- 🔑 **密码**: `admin123456`
- 👑 **角色**: `admin`

### 创建其他管理员账户

由于系统支持多种管理员验证方式，您可以选择以下任一方式：

**方式一：**
用户名：admin_manager
密码：123456
邮箱：admin@admin.star.com

**方式二：**
用户ID：admin
密码：123456
邮箱：admin@example.com

### 访问流程

1. 打开浏览器访问：http://localhost:3000/
2. 点击"注册"按钮
3. 填写管理员信息（使用上述示例）
4. 注册成功后登录
5. 直接访问：http://localhost:3000/analytics/dashboard

## 🔧 系统功能

登录后台后，您可以使用以下功能：

### 数据概览
- 活跃用户统计
- 总操作数统计
- 转化率分析
- 热门产品排行

### 用户行为分析
- 行为类型分布图
- 用户转化漏斗
- 用户活跃度统计

### 产品性能分析
- 产品浏览量排行
- 产品转化率分析
- 收入贡献分析

### 趋势分析
- 多维度数据趋势
- 时间范围选择（7天/30天/90天）

### 智能建议
- 基于数据的业务优化建议
- 优先级分类

## 🛠️ 故障排除

### 问题1：提示"权限不足"
**解决方案：**
- 确认使用的是管理员账户登录
- 检查用户ID、用户名或邮箱是否符合管理员规则
- 确认已经成功登录系统

### 问题2：无法访问数据分析页面
**解决方案：**
- 确认服务器正在运行：http://localhost:3000/
- 检查是否已经登录
- 尝试清除浏览器缓存和Cookie

### 问题3：页面显示异常
**解决方案：**
- 刷新页面
- 检查浏览器控制台是否有错误信息
- 确认网络连接正常

## 📞 技术支持

如果遇到其他问题，请检查：

1. **服务器状态**：确认 `npm start` 命令正常运行
2. **数据库连接**：检查数据库文件是否存在
3. **环境配置**：确认 `.env` 文件配置正确
4. **日志信息**：查看服务器控制台输出的错误信息

## 🔒 安全提醒

- 请妥善保管管理员账户信息
- 定期更改密码
- 不要在生产环境中使用默认的管理员用户ID
- 建议在生产环境中使用更复杂的权限验证机制

---

**系统版本**：STAR购物平台 v1.0  
**最后更新**：2024年12月  
**技术栈**：Node.js + Express + SQLite + EJS